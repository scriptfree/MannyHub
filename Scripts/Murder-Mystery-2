game:GetService("StarterGui"):SetCore("SendNotification",{
                Title = "Success";
                Text = "Thanks for using Manny Hub!";
                Duration = 2;})


local Library = loadstring(game:HttpGet("https://pastebin.com/raw/GdN5iRbt"))() 
local Window = Library.CreateLib("Manny Hub", "BloodTheme") 


local Tab1 = Window:NewTab("Main")
local Tab1Section = Tab1:NewSection("Configs")

local function teleportToGunDropAndBack()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local rootPart = character:WaitForChild("HumanoidRootPart")

    -- Find the Normal object and then the GunDrop part inside it
    local normalFolder = workspace:FindFirstChild("Normal")
    if normalFolder then
        local gunDrop = normalFolder:FindFirstChild("GunDrop")

        if gunDrop then
            -- Save the player's current position
            local savedPosition = rootPart.CFrame

            -- Teleport to the GunDrop part
            rootPart.CFrame = gunDrop.CFrame + Vector3.new(0, 2, 0) -- Teleport 3 units above the GunDrop part

            -- Wait for a brief moment to ensure the teleport is registered
            wait(0.1) -- Adjust the wait time as needed

            -- Teleport back to the saved position
            rootPart.CFrame = savedPosition
        else
            -- Display a notification if the GunDrop part is not found
            game:GetService("StarterGui"):SetCore("SendNotification",{
                Title = "Notification";
                Text = "The gun has not been dropped yet.";
                Duration = 2;
            })
        end
    else
        -- Display a notification if the Normal folder is not found
        game:GetService("StarterGui"):SetCore("SendNotification",{
            Title = "Notification";
            Text = "The Normal folder is not found in the workspace.";
            Duration = 2;
        })
    end
end


local collectedCoins = {}

-- Function to teleport the player slightly above each "Coin_Server" part
local function teleportToCoins()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local rootPart = character:WaitForChild("HumanoidRootPart")

    local coins = workspace:GetDescendants()
    local foundCoin = false

    for _, item in ipairs(coins) do
        if item:IsA("BasePart") and item.Name == "Coin_Server" and not collectedCoins[item] then
            rootPart.CFrame = item.CFrame + Vector3.new(0, 3, 0) -- Teleport 3 units above the coin
            collectedCoins[item] = true -- Mark this coin as collected
            foundCoin = true
            -- Wait until the coin is touched (simple simulation with a delay)
            wait(0.5) -- Simulate the time it takes to touch the coin
            break
        end
    end

    -- If a Coin_Server is found and touched, teleport back to the specified coordinates
    if foundCoin then
        rootPart.CFrame = CFrame.new(-95.58431243896484, 152.73521423339844, 105.27819061279297)
    end
end



local function updateHighlight(player)
    -- Check if the player has a character
    if player.Character then
        -- Find or create the highlight
        local highlight = player.Character:FindFirstChild("Highlight")
        if not highlight then
            highlight = Instance.new("Highlight")
            highlight.Name = "Highlight"
            highlight.Parent = player.Character
            highlight.OutlineTransparency = 0 -- Outline fully visible
            highlight.FillTransparency = 0.5 -- Semi-transparent fill
            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop -- Always visible
        end
        
        -- Check the player's backpack and character for tools
        local hasKnife = false
        local hasGun = false
        
        if player.Backpack:FindFirstChild("Knife") or (player.Character and player.Character:FindFirstChild("Knife")) then
            hasKnife = true
        end
        if player.Backpack:FindFirstChild("Gun") or (player.Character and player.Character:FindFirstChild("Gun")) then
            hasGun = true
        end

        -- Set the highlight color based on the tools
        if hasKnife then
            highlight.FillColor = Color3.new(1, 0, 0) -- Red fill color for Knife
            highlight.OutlineColor = Color3.new(1, 0, 0) -- Red outline color for Knife
        elseif hasGun then
            highlight.FillColor = Color3.new(0, 0, 1) -- Blue fill color for Gun
            highlight.OutlineColor = Color3.new(0, 0, 1) -- Blue outline color for Gun
        else
            highlight.FillColor = Color3.new(0.5, 0.5, 0.5) -- Grey fill color for others
            highlight.OutlineColor = Color3.new(1, 1, 1) -- White outline color for others
        end
    end
end

-- Function to remove highlights from a specific player
local function removeHighlight(player)
    if player.Character then
        local highlight = player.Character:FindFirstChild("Highlight")
        if highlight then
            highlight:Destroy()
        end
    end
end

-- Function to remove highlights from all players
local function removeAllHighlights()
    for _, player in pairs(game.Players:GetPlayers()) do
        removeHighlight(player)
    end
end

-- Function to update highlights for all players
local function updateAllHighlights()
    for _, player in pairs(game.Players:GetPlayers()) do
        updateHighlight(player)
    end
end

-- Function to set up event listeners for a player
local function setupPlayer(player)
    player.CharacterAdded:Connect(function()
        -- Delay to ensure player's tools have loaded
        wait(1)
        
        if getgenv().FLO then
            -- Add/update the highlight for the new player's character
            updateHighlight(player)
        else
            -- Remove the highlight if the toggle is off
            removeHighlight(player)
        end
        
        -- Update highlight if the player's backpack changes
        player.Backpack.ChildAdded:Connect(function()
            if getgenv().FLO then
                updateHighlight(player)
            else
                removeHighlight(player)
            end
        end)
        player.Backpack.ChildRemoved:Connect(function()
            if getgenv().FLO then
                updateHighlight(player)
            else
                removeHighlight(player)
            end
        end)
    end)
end

-- Event listener for new players joining
game.Players.PlayerAdded:Connect(function(player)
    setupPlayer(player)
end)

-- Setup existing players
for _, player in pairs(game.Players:GetPlayers()) do
    setupPlayer(player)
end

-- Toggle ESP
Tab1Section:NewToggle("ESP", ".", function(t)
    getgenv().FLO = t
    if getgenv().FLO then
        while getgenv().FLO do
            updateAllHighlights()
            wait(0.5)
        end
    else
        removeAllHighlights()
    end
end)

Tab1Section:NewToggle("Autofarm coins", ".", function(t)
    getgenv().FLO = t
    spawn(function()
        while getgenv().FLO do
            teleportToCoins()
            wait(2) -- Wait time to ensure the loop doesn't run too quickly
        end
    end)
end)

Tab1Section:NewButton("Teleport to murderer", ".", function()
    local Players = game:GetService("Players")
    local localPlayer = Players.LocalPlayer
    
    -- Function to find the player with the Knife
    local function findPlayerWithKnife()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= localPlayer then
                local character = player.Character
                local backpack = player:FindFirstChildOfClass("Backpack")
                if backpack then
                    for _, item in ipairs(backpack:GetChildren()) do
                        if item.Name == "Knife" then
                            return player
                        end
                    end
                end
                
                if character then
                    local humanoid = character:FindFirstChildOfClass("Humanoid")
                    if humanoid and humanoid:FindFirstChild("Knife") then
                        return player
                    end
                end
            end
        end
        return nil
    end

    local function teleportBehind(player)
        local character = localPlayer.Character
        local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
        
        if not humanoidRootPart then return end
        
        local targetCharacter = player.Character
        if targetCharacter then
            local targetHumanoidRootPart = targetCharacter:FindFirstChild("HumanoidRootPart")
            if targetHumanoidRootPart then
                local targetPosition = targetHumanoidRootPart.Position
                local direction = (targetHumanoidRootPart.Position - humanoidRootPart.Position).Unit
                local offset = -5 -- Distance behind the player
                humanoidRootPart.Position = targetPosition - direction * offset
            end
        end
    end

    local knifeHolder = findPlayerWithKnife()
    if knifeHolder then
        teleportBehind(knifeHolder)
    end
end)


Tab1Section:NewButton("Teleport to gun", ".", function()

teleportToGunDropAndBack()

end)



Tab1Section:NewSlider("Speed Changer", "Walkspeed", 100, 16, function(ws)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = ws
end)

Tab1Section:NewButton("Anti AFK", ".", function()

for a,b in pairs(getconnections(game.Players.LocalPlayer.Idled))do b:Disable()end
warn("anti afk loaded")

end)
