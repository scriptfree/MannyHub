game:GetService("StarterGui"):SetCore("SendNotification",{
                Title = "Success";
                Text = "Thanks for using Manny Hub!";
                Duration = 2;})


local Library = loadstring(game:HttpGet("https://pastebin.com/raw/GdN5iRbt"))() 
local Window = Library.CreateLib("Manny Hub", "BloodTheme") 


local Tab1 = Window:NewTab("Main")
local Tab1Section = Tab1:NewSection("Configs")

local toolName = "Gun"

-- Function to find the tool in players' inventories
local function findToolInPlayers()
    for _, player in pairs(game.Players:GetPlayers()) do
        if player.Backpack:FindFirstChild(toolName) or (player.Character and player.Character:FindFirstChild(toolName)) then
            return true
        end
    end
    return false
end

-- Function to find the dropped tool in the workspace
local function findDroppedTool()
    for _, tool in pairs(workspace:GetDescendants()) do
        if tool:IsA("Tool") and tool.Name == toolName then
            return tool
        end
    end
    return nil
end

-- Main function to check for the tool and teleport
local function checkAndTeleport()
    if not findToolInPlayers() then
        local droppedTool = findDroppedTool()
        if droppedTool then
            local player = game.Players.LocalPlayer
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character.HumanoidRootPart.CFrame = droppedTool.Handle.CFrame
            end
        else
            print("Gun tool is not found in any inventory or dropped in the workspace.")
        end
    else
        print("Gun tool is found in a player's inventory.")
    end
end

-- Function to create or update a highlight around a player
local function updateHighlight(player)
    -- Check if the player has a character
    if player.Character then
        -- Find or create the highlight
        local highlight = player.Character:FindFirstChild("Highlight")
        if not highlight then
            highlight = Instance.new("Highlight")
            highlight.Name = "Highlight"
            highlight.Parent = player.Character
            highlight.OutlineTransparency = 0 -- Outline fully visible
            highlight.FillTransparency = 0.5 -- Semi-transparent fill
            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop -- Always visible
        end
        
        -- Check the player's backpack and character for tools
        local hasKnife = false
        local hasGun = false
        
        if player.Backpack:FindFirstChild("Knife") or (player.Character and player.Character:FindFirstChild("Knife")) then
            hasKnife = true
        end
        if player.Backpack:FindFirstChild("Gun") or (player.Character and player.Character:FindFirstChild("Gun")) then
            hasGun = true
        end

        -- Set the highlight color based on the tools
        if hasKnife then
            highlight.FillColor = Color3.new(1, 0, 0) -- Red fill color for Knife
            highlight.OutlineColor = Color3.new(1, 0, 0) -- Red outline color for Knife
        elseif hasGun then
            highlight.FillColor = Color3.new(0, 0, 1) -- Blue fill color for Gun
            highlight.OutlineColor = Color3.new(0, 0, 1) -- Blue outline color for Gun
        else
            highlight.FillColor = Color3.new(0.5, 0.5, 0.5) -- Grey fill color for others
            highlight.OutlineColor = Color3.new(1, 1, 1) -- White outline color for others
        end
    end
end

-- Function to remove highlights from all players
local function removeAllHighlights()
    for _, player in pairs(game.Players:GetPlayers()) do
        if player.Character then
            local highlight = player.Character:FindFirstChild("Highlight")
            local hasKnife = player.Backpack:FindFirstChild("Knife") or (player.Character and player.Character:FindFirstChild("Knife"))
            local hasGun = player.Backpack:FindFirstChild("Gun") or (player.Character and player.Character:FindFirstChild("Gun"))
            
            if highlight and not hasKnife and not hasGun then
                highlight:Destroy()
            end
        end
    end
end

-- Function to update highlights for all players
local function updateAllHighlights()
    for _, player in pairs(game.Players:GetPlayers()) do
        updateHighlight(player)
    end
end

-- Function to set up event listeners for a player
local function setupPlayer(player)
    -- Wait for the character to be added
    player.CharacterAdded:Connect(function()
        -- Add/update the highlight for the new player's character
        updateHighlight(player)
        
        -- Update highlight if the player's backpack changes
        player.Backpack.ChildAdded:Connect(function()
            updateHighlight(player)
        end)
        player.Backpack.ChildRemoved:Connect(function()
            updateHighlight(player)
        end)
    end)
end

-- Event listener for new players joining
game.Players.PlayerAdded:Connect(function(player)
    setupPlayer(player)
end)

-- Setup existing players
for _, player in pairs(game.Players:GetPlayers()) do
    setupPlayer(player)
end

-- Toggle ESP
Tab1Section:NewToggle("ESP", ".", function(t)
    getgenv().FLO = t
    if getgenv().FLO then
        while getgenv().FLO do
            updateAllHighlights()
            wait(0.5)
        end
    else
        removeAllHighlights()
    end
end)



Tab1Section:NewButton("Teleport to gun", ".", function()

checkAndTeleport()

end)
